{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useDispatchCart,useCart}from\"./ContextReducer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){let dispatch=useDispatchCart();let data=useCart();const priceRef=useRef();let options=props.options;let priceOptions=Object.keys(options);const[qty,setQty]=useState(1);const[size,setSize]=useState(\"\");const handleAddToCart=async()=>{let food=[];for(const item of data){if(item.id===props.foodItem._id){food=item;break;}}if(food!==0){if(food.size===size){await dispatch({type:\"UPDATE\",id:props.foodItem._id,price:finalPrice,qty:qty});return;}else if(food.size!==size){await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size});return;//console.log(data);\n}return;}await dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size});};let finalPrice=qty*parseInt(options[size]);useEffect(()=>{setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-5\",style:{width:\"18rem\",maxHeight:\"360px\",boxShadow:\"8px 8px 5px gray\"},children:[/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top\",src:props.foodItem.img,alt:\"Card pic cap\",style:{height:\"180px\",objectFit:\"cover\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodItem.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded\",onChange:e=>setQty(e.target.value),children:Array.from(Array(6),(e,i)=>{return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded\",ref:priceRef,onChange:e=>setSize(e.target.value),children:priceOptions.map(data=>{return/*#__PURE__*/_jsx(\"option\",{value:data,children:data},data);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-inline fs-5\",children:[\"\\u20B9\",finalPrice,\"/-\"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success justify-center mx-1\",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatchCart","useCart","jsx","_jsx","jsxs","_jsxs","Card","props","dispatch","data","priceRef","options","priceOptions","Object","keys","qty","setQty","size","setSize","handleAddToCart","food","item","id","foodItem","_id","type","price","finalPrice","name","parseInt","current","value","children","className","style","width","maxHeight","boxShadow","src","img","alt","height","objectFit","onChange","e","target","Array","from","i","ref","map","onClick"],"sources":["C:/Users/Subhi/OneDrive/Desktop/FOODIES/the-foodies/src/components/Card.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatchCart, useCart } from \"./ContextReducer\";\r\n\r\nexport default function Card(props) {\r\n  let dispatch = useDispatchCart();\r\n  let data = useCart();\r\n  const priceRef = useRef();\r\n  let options = props.options;\r\n  let priceOptions = Object.keys(options);\r\n  const [qty, setQty] = useState(1);\r\n  const [size, setSize] = useState(\"\");\r\n\r\n  const handleAddToCart = async () => {\r\n    let food = [];\r\n    for (const item of data) {\r\n      if (item.id === props.foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (food !== 0) {\r\n      if (food.size === size) {\r\n        await dispatch({\r\n          type: \"UPDATE\",\r\n          id: props.foodItem._id,\r\n          price: finalPrice,\r\n          qty: qty,\r\n        });\r\n        return;\r\n      } else if (food.size !== size) {\r\n        await dispatch({\r\n          type: \"ADD\",\r\n          id: props.foodItem._id,\r\n          name: props.foodItem.name,\r\n          price: finalPrice,\r\n          qty: qty,\r\n          size: size,\r\n        });\r\n        return;\r\n        //console.log(data);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    await dispatch({\r\n      type: \"ADD\",\r\n      id: props.foodItem._id,\r\n      name: props.foodItem.name,\r\n      price: finalPrice,\r\n      qty: qty,\r\n      size: size,\r\n    });\r\n  };\r\n\r\n  let finalPrice = qty * parseInt(options[size]);\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        className=\"card mt-5\"\r\n        style={{\r\n          width: \"18rem\",\r\n          maxHeight: \"360px\",\r\n          boxShadow: \"8px 8px 5px gray\",\r\n        }}\r\n      >\r\n        <img\r\n          className=\"card-img-top\"\r\n          src={props.foodItem.img}\r\n          alt=\"Card pic cap\"\r\n          style={{\r\n            height: \"180px\",\r\n            objectFit: \"cover\",\r\n          }}\r\n        />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{props.foodItem.name}</h5>\r\n          <div className=\"container w-100\">\r\n            <select\r\n              className=\"m-2 h-100 bg-success rounded\"\r\n              onChange={(e) => setQty(e.target.value)}\r\n            >\r\n              {Array.from(Array(6), (e, i) => {\r\n                return (\r\n                  <option key={i + 1} value={i + 1}>\r\n                    {i + 1}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n\r\n            <select\r\n              className=\"m-2 h-100 bg-success rounded\"\r\n              ref={priceRef}\r\n              onChange={(e) => setSize(e.target.value)}\r\n            >\r\n              {priceOptions.map((data) => {\r\n                return (\r\n                  <option key={data} value={data}>\r\n                    {data}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n\r\n            <div className=\"w-100 d-inline fs-5\">â‚¹{finalPrice}/-</div>\r\n          </div>\r\n          <hr></hr>\r\n          <button\r\n            className=\"btn btn-success justify-center mx-1\"\r\n            onClick={handleAddToCart}\r\n          >\r\n            Add to Cart\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}